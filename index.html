<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>paravostok • the website</title>
  <link rel="icon" href="assets/favicon.jpg" type="image/jpg" />
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Libre+Franklin:wght@300;500;700&display=swap" rel="stylesheet" />
</head>
<body>
  <header class="site-header">
    <div class="wrapper">
      <h1 class="site-title">paravostok</h1>
      <p class="site-subtitle">the website</p>
    </div>
  </header>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.5/seedrandom.min.js"></script>
  <script>
    window.seedrandom = window.seedrandom || Math.random;
  </script>
  
  <main class="wrapper">
    <section class="intro">
      <p>
        welcome to my website, here i share travel/transit stuff, youtube, and whatever else i get up to
      </p>
    </section>

    <section class="block-section">
      <h2 class="block-title">latest youtube upload</h2>
      <a id="youtube-link" href="https://www.youtube.com/@paravostok" target="_blank" rel="noopener noreferrer" class="thumbnail-link">
        <img id="youtube-thumbnail" src="" alt="latest youtube thumbnail" class="thumbnail-image" />
      </a>
      <p class="block-caption">click above to watch my most recent youtube vid.</p>
    </section>

    <section class="block-section">
      <h2 class="block-title">travel blog: latest post</h2>
      <div id="latest-post" class="post-preview">
        <!-- injected by JS -->
      </div>
    </section>

    <section class="block-section">
      <h2 class="block-title">play my game: councille</h2>
      <p class="block-caption">guess the scottish council. it’s more fun than it sounds.</p>
      <a href="https://paravostok.github.io/Councille/" class="read-more">play councille →</a>
    </section>

    <section class="block-section">
      <h2 class="block-title">or, play my other game, scotdoku</h2>
      <p class="block-caption">similar to a crossword, but for scottish towns.</p>
      <a href="https://paravostok.github.io/Scotdoku/" class="read-more">play scotdoku →</a>
    </section>

    <section class="block-section">
      <h2 class="block-title">all my links</h2>
      <ul class="social-list">
  <li>
    <a href="https://www.youtube.com/@paravostok" target="_blank" rel="noopener noreferrer" class="social-icon" title="youtube">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/0a/YouTube_social_red_circle_%282024%29.svg/2048px-YouTube_social_red_circle_%282024%29.svg.png" alt="youtube logo" />
    </a>
  </li>
  <li>
    <a href="https://github.com/paravostok/" target="_blank" rel="noopener noreferrer" class="social-icon" title="github">
      <img src="https://cdn-icons-png.flaticon.com/256/25/25231.png" alt="github logo" />
    </a>
  </li>
  <li>
    <a href="https://www.twitch.tv/paravostok" target="_blank" rel="noopener noreferrer" class="social-icon" title="twitch">
      <img src="https://cdn3.iconfinder.com/data/icons/social-messaging-ui-color-shapes-2-free/128/social-twitch-circle-512.png" alt="twitch logo" />
    </a>
  </li>
  <li>
    <a href="https://steamcommunity.com/profiles/76561199097158441" target="_blank" rel="noopener noreferrer" class="social-icon" title="steam">
      <img src="https://upload.wikimedia.org/wikipedia/commons/8/83/Steam_icon_logo.svg" alt="steam logo" />
    </a>
  </li>
</ul>

    </section>
  </main>

  <footer class="site-footer">
    <div class="wrapper">
      <p id="last-update">last website update: </p>
    </div>
  </footer>

  <!-- JS to fetch youtube, footer date, and latest blog post -->
  <script>
    // update footer
    (function(){
      const now = new Date();
      const pad = n => String(n).padStart(2,'0');
      document.getElementById('last-update').textContent =
        `last website update: ${now.getFullYear()}-${pad(now.getMonth()+1)}-${pad(now.getDate())}`;
    })();

    // youtube via rss2json
    async function updateYouTube() {
      try {
        const rss = 'https://www.youtube.com/feeds/videos.xml?channel_id=UC1JgbSE0oh-euWtCe4q_gfw';
        const res = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rss)}`);
        const d = await res.json();
        if (!d.items || !d.items.length) throw 0;
        const vid = d.items[0].guid.split(':')[2];
        document.getElementById('youtube-thumbnail').src = `https://img.youtube.com/vi/${vid}/maxresdefault.jpg`;
        document.getElementById('youtube-link').href = d.items[0].link;
      } catch {
        console.error('youtube fetch failed');
      }
    }
    updateYouTube();

    // load latest blog post dynamically
    async function loadLatestPost() {
      try {
        const res = await fetch('posts/post.json');
        const posts = await res.json();
        if (!Array.isArray(posts) || !posts.length) throw 0;

        // parse date from 'd.m.yy' in filename
        const parsed = posts.map(p => {
          const [d, m, y] = p.file.replace('.html','').split('.').map(Number);
          // assume 2000-based years, so '25' → 2025
          const fullYear = 2000 + y;
          return {...p, date: new Date(fullYear, m-1, d)};
        });

        // find max date
        parsed.sort((a,b) => b.date - a.date);
        const latest = parsed[0];

        document.getElementById('latest-post').innerHTML = `
          <h3 class="post-title">${latest.title}</h3>
          <b class="post-excerpt">${latest.excerpt}</b>
          <a href="posts/${latest.file}" class="read-more">read more →</a>
        `;
      } catch (e) {
        console.error('latest post load failed', e);
        document.getElementById('latest-post').innerHTML = '<p>couldn’t load latest post.</p>';
      }
    }
    loadLatestPost();
  </script>
</body>
</html>
